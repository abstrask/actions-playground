name: Replace assignee
on:
  - pull_request

env:
  GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  PR_NUMBER: ${{ github.event.pull_request.number }}

permissions:
  pull-requests: write

jobs:
  replace-assignee:
    name: Replace assignee
    runs-on: ubuntu-latest
    if: github.event.pull_request.user.login == vars.REPLACE_ASSIGNEE_PR_CREATOR

                        # REPLACE_ASSIGNEE_WITH
                    # reviewRequests
    steps:
    - id: remove-assignees
      name: Remove assignees
      run: |
        peeps=($(gh pr view $PR_NUMBER --repo $GITHUB_REPOSITORY --json assignees --jq '.assignees[].login'))
        for p in $peeps; do
          gh pr edit $PR_NUMBER --repo $GITHUB_REPOSITORY --remove-assignee $p
        done

